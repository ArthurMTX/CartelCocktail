{% extends "base.html" %}

{% block content %}
<div class="visualization-container">
    <h2 class="text-center mb-4">Connexions Genres & Cocktails</h2>
    
    <div class="controls mb-3">
        <div class="btn-group">
            <button class="btn btn-outline-primary" id="showAll">Tout afficher</button>
            <button class="btn btn-outline-primary" id="showGenres">Genres</button>
            <button class="btn btn-outline-primary" id="showCocktails">Cocktails</button>
        </div>
    </div>

    <div class="network-visualization">
        <svg id="network"></svg>
    </div>

    <div class="legend mt-3">
        <div class="legend-item">
            <span class="legend-dot genre-dot"></span> Genres Musicaux
        </div>
        <div class="legend-item">
            <span class="legend-dot cocktail-dot"></span> Cocktails
        </div>
        <div class="legend-item">
            <span class="legend-line"></span> Connexion forte
        </div>
    </div>
</div>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="{{ url_for('static', filename='js/visualization.js') }}"></script>
{% endblock %}

{% block styles %}
<style>
.visualization-container {
    padding: 2rem;
    background-color: var(--secondary-color);
    border-radius: 10px;
    margin: 2rem auto;
    max-width: 1200px;
}

.network-visualization {
    width: 100%;
    height: 600px;
    background-color: var(--primary-color);
    border-radius: 8px;
    overflow: hidden;
}

#network {
    width: 100%;
    height: 100%;
}

.legend {
    display: flex;
    justify-content: center;
    gap: 2rem;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.legend-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
}

.genre-dot {
    background-color: var(--accent-color);
}

.cocktail-dot {
    background-color: #e74c3c;
}

.legend-line {
    width: 20px;
    height: 2px;
    background-color: rgba(255, 255, 255, 0.5);
}

.controls {
    text-align: center;
}

.node text {
    font-family: 'Roboto Condensed', sans-serif;
    font-size: 12px;
}

.link {
    stroke-opacity: 0.6;
}

.node circle {
    stroke: var(--primary-color);
    stroke-width: 2px;
}
</style>
{% endblock %}
